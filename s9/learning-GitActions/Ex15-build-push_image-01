# .github/workflows/simple-ci.yml

name: CI Workflow

on:
  push:
    branches:
      - main

jobs:
  checkout:
    name: Stage 1 - Checkout
    runs-on: [self-hosted, repo-build]                

    steps:                                 # what do we want to do
      - name: Checkout repository          # to check the repository in question
        uses: actions/checkout@v3          # checkout action

      - name: Checkout Info      
        run: |
          echo "Checking out the repository. Please wait .........."             
          sleep 3
          pwd
          ls              

  test:
    name: Build image and push to DockerHub
    runs-on: [self-hosted, repo-build]           
    needs: checkout

    steps:                                 # what do we want to do
      - name: Testing the code
        run: |
          docker --version
          sudo docker images
